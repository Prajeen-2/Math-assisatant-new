<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SS Math Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #fff8dc, #fef9e7);
        margin: 0;
        padding: 0;
        text-align: center;
    }
    header {
        background-color: #ffcc00;
        padding: 20px;
        font-size: 30px;
        font-weight: bold;
        color: #333;
        box-shadow: 0px 3px 10px rgba(0,0,0,0.2);
    }
    .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 30px;
    }
    .card {
        background: #fff;
        width: 420px;
        margin: 15px;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0px 4px 10px rgba(0,0,0,0.15);
        transition: 0.3s;
    }
    .card:hover { transform: scale(1.03); }

    h2 { color: #333; }

    input {
        padding: 8px;
        width: 150px;
        border-radius: 6px;
        border: 1px solid #ccc;
        margin: 5px;
        font-size: 16px;
    }
    button {
        padding: 10px 18px;
        border: none;
        border-radius: 8px;
        background-color: #6f42c1;
        color: #fff;
        cursor: pointer;
        margin: 5px;
        font-size: 15px;
        transition: 0.3s;
    }
    button:hover {
        background-color: #5a33a6;
        transform: scale(1.05);
    }
    #result {
        margin-top: 15px;
        font-size: 18px;
        font-weight: 500;
    }
    #history {
        background: #fef7d1;
        border-radius: 10px;
        padding: 10px;
        margin-top: 15px;
        height: 150px;
        overflow-y: auto;
        box-shadow: inset 0px 2px 5px rgba(0,0,0,0.1);
    }
    #history p {
        margin: 4px;
        font-size: 14px;
        color: #333;
    }

    img {
        margin-top: 20px;
        border: 2px solid #ccc;
        border-radius: 10px;
        width: 100%;
    }
</style>
</head>

<body>

<header>üßÆ SS Math Assistant</header>

<div class="container">

    <!-- Arithmetic Card -->
    <div class="card">
        <h2>Basic Arithmetic</h2>

        <input type="number" id="valA" placeholder="Enter A">
        <input type="number" id="valB" placeholder="Enter B"><br>

        <button onclick="calculate('add')">Add</button>
        <button onclick="calculate('sub')">Subtract</button>
        <button onclick="calculate('mul')">Multiply</button>
        <button onclick="calculate('div')">Divide</button>

        <div id="result"></div>

        <div id="history">
            <strong>üïí Calculation History</strong>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- Fibonacci Curve Card -->
    <div class="card">
        <h2>üåÄ Fibonacci Curve</h2>

        <label>Enter number of arcs (N):</label><br>
        <input type="number" id="terms" min="1" max="20" value="8">

        <button onclick="loadSpiral()">Generate Curve</button>

        <p id="spiralLabel"></p>

        <img id="spiralImage" src="" alt="Fibonacci Spiral will appear here">
    </div>

</div>

<script>
/* -------------------------------
   CONFIGURE BACKEND URL HERE  
--------------------------------*/
const API_BASE = "https://math-assisatant-new-1.onrender.com";  
/* Example:
const API_BASE = "https://math-backend.onrender.com";
*/

/* -------------------------------
   BASIC ARITHMETIC
--------------------------------*/
let historyList = [];

function calculate(op) {
    const a = parseFloat(document.getElementById("valA").value);
    const b = parseFloat(document.getElementById("valB").value);

    if (isNaN(a) || isNaN(b)) {
        document.getElementById("result").innerText = "Enter valid inputs";
        return;
    }

    let result;
    switch(op) {
        case "add": result = a + b; break;
        case "sub": result = a - b; break;
        case "mul": result = a * b; break;
        case "div": 
            if (b === 0) {
                result = "Cannot divide by zero";
            } else result = a / b;
            break;
    }

    document.getElementById("result").innerText = "Result: " + result;
    addToHistory(`${a} ${op} ${b} = ${result}`);
}

function addToHistory(entry) {
    if (historyList.length >= 8) historyList.shift();
    historyList.push(entry);

    document.getElementById("historyList").innerHTML =
        historyList.map(e => `<p>‚û°Ô∏è ${e}</p>`).join("");
}

/* -------------------------------
   LOAD FIBONACCI SPIRAL (IMAGE)
--------------------------------*/
function loadSpiral() {
    const n = document.getElementById("terms").value;
    const img = document.getElementById("spiralImage");

    img.src = `${API_BASE}/fibonacci-image?terms=${n}&width=600&height=600&rand=${Math.random()}`;

    document.getElementById("spiralLabel").innerText =
        `Generated Fibonacci curve with ${n} arcs`;
}
</script>

</body>
</html>
